(this.webpackJsonpweb=this.webpackJsonpweb||[]).push([[0],{62:function(e,t,n){},64:function(e,t,n){},95:function(e,t,n){"use strict";n.r(t);var r=n(2),c=n(0),a=n.n(c),i=n(27),o=n.n(i),s=(n(62),n(37)),u=n(15),l=n(10),f=n.n(l),d=n(22),j=n(98),h=n(48),b=n(104),p=n(99),O=n(103),m=n(105),x=n(100),g=n(101),v=(n(64),n(47)),w=n.n(v),y=function(e,t){return new Promise(function(){var n=Object(d.a)(f.a.mark((function n(r,c){return f.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:fetch(e,t).then(function(){var e=Object(d.a)(f.a.mark((function e(t){var n;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.text();case 2:return n=e.sent,t.ok||c(JSON.parse(n)),e.abrupt("return",n);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).then((function(e){return r(JSON.parse(e))})).catch((function(e){return c(e)}));case 1:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}())};var S=function(){var e=a.a.useRef(null),t=Object(c.useState)([]),n=Object(u.a)(t,2),i=n[0],o=n[1],l=Object(c.useState)([]),v=Object(u.a)(l,2),S=v[0],k=v[1],C=Object(c.useState)([]),E=Object(u.a)(C,2),J=E[0],T=E[1],N=Object(c.useState)(""),D=Object(u.a)(N,2),I=D[0],z=D[1],B=Object(c.useState)({name:"",token:""}),F=Object(u.a)(B,2),L=F[0],P=F[1],Y=Object(c.useState)("general"),A=Object(u.a)(Y,2),G=A[0],H=A[1],M=a.a.useState(""),R=Object(u.a)(M,2),W=R[0],K=R[1],_=a.a.useState(""),q=Object(u.a)(_,2),Q=q[0],U=q[1],V=a.a.useState(""),X=Object(u.a)(V,2),Z=X[0],$=X[1],ee=a.a.useState(""),te=Object(u.a)(ee,2),ne=te[0],re=te[1],ce=Object(j.a)(!0),ae=ce.isOpen,ie=ce.onOpen,oe=ce.onClose;Object(c.useEffect)((function(){var e=localStorage.getItem("session");if(null!==e){var t=JSON.parse(e);P(t),oe()}}),[]),Object(c.useEffect)((function(){return e.current=new WebSocket("ws://127.0.0.1:8080/ws"),e.current.onclose=function(e){console.log(e)},e.current.onopen=function(e){console.log(e)},function(){e.current.close()}}),[]),Object(c.useEffect)((function(){e.current&&(e.current.onmessage=function(e){var t=JSON.parse(e.data);if(t.rid===G&&null===t.error){var n={id:t.id,rid:t.rid,uid:t.uid,message:t.message,created:t.created};k((function(e){return[].concat(Object(s.a)(e),[n])}))}else if(null!==t.error){var r={id:t.id,rid:t.rid,uid:t.uid,message:t.error.message,created:t.created};k((function(e){return[].concat(Object(s.a)(e),[r])}))}})}),[G]),Object(c.useEffect)((function(){function e(){return(e=Object(d.a)(f.a.mark((function e(){var t,n;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={method:"GET",headers:{Authorization:"Bearer ".concat(L.token)}},e.next=3,y("http://127.0.0.1:8080/rooms",t);case 3:n=e.sent,o(n);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[L]),Object(c.useEffect)((function(){function e(){return(e=Object(d.a)(f.a.mark((function e(){var t,n;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={method:"GET",headers:{Authorization:"Bearer ".concat(L.token)}},e.next=3,y("http://127.0.0.1:8080/profiles",t);case 3:n=e.sent,T(n);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[L]),Object(c.useEffect)((function(){function e(){return(e=Object(d.a)(f.a.mark((function e(){var t,n;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={method:"GET",headers:{Authorization:"Bearer ".concat(L.token)}},e.next=3,y("http://127.0.0.1:8080/messages/".concat(G),t);case 3:n=e.sent,k(n);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[G,L]);var se=function(){var e=J.find((function(e){return e.name===L.name}));return(null===e||void 0===e?void 0:e.id)||""},ue=function(e){return"bot"===e?{id:"bot",name:"BOT"}:J.find((function(t){return t.id===e}))||{name:"",id:""}},le=function(){var t=Q;""!==t&&(t.startsWith("/stock")?function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n={rid:G,uid:se(),type:"command",message:t.substring(1)};e.current.send(JSON.stringify(n))}(t):function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n={rid:G,uid:se(),type:"message",message:t};e.current.send(JSON.stringify(n))}(t),U(""))};return Object(r.jsxs)(h.a,{flexDirection:"column",width:"100%",children:[Object(r.jsxs)(h.a,{justifyContent:"space-between",width:"100%",px:"2rem",backgroundColor:"#34495e",paddingTop:"1rem",paddingBottom:"1rem",children:[Object(r.jsx)(b.a,{name:L.name}),Object(r.jsx)(p.a,{fontSize:"2rem",color:"#FFF",children:G}),Object(r.jsx)(O.a,{onClick:function(){localStorage.removeItem("session"),P({name:"",token:""}),ie()},children:"Logout"})]}),Object(r.jsxs)(h.a,{width:"100%",children:[Object(r.jsxs)(h.a,{flex:"3",backgroundColor:"#ecf0f1",height:"90vh",flexDirection:"column",children:[Object(r.jsxs)(h.a,{margin:".5rem",justifyContent:"center",children:[Object(r.jsx)(m.a,{placeholder:"New Room",value:W,onChange:function(e){return K(e.target.value)}}),Object(r.jsx)(O.a,{onClick:function(){function e(){return(e=Object(d.a)(f.a.mark((function e(){var t,n,r;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={name:W},n={method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(L.token)},body:JSON.stringify(t)},e.next=4,y("http://127.0.0.1:8080/rooms",n);case 4:r=e.sent,o((function(e){return[].concat(Object(s.a)(e),[r])}));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()},children:"Create"})]}),i.map((function(e){return Object(r.jsx)(x.a,{cursor:"pointer",isInline:!0,backgroundColor:"#2980b9",margin:"0.2rem",onClick:function(){return H(e.name)},children:Object(r.jsx)(p.a,{children:e.name})},e.id)}))]}),Object(r.jsxs)(h.a,{flex:"7",height:"100%",flexDirection:"column",px:"1rem",children:[Object(r.jsx)(h.a,{flexDirection:"column",height:"85vh",maxHeight:"85vh",overflowY:"scroll",children:S.map((function(e){return Object(r.jsxs)(h.a,{flexDirection:"column",my:"0.3rem",children:[Object(r.jsxs)(x.a,{isInline:!0,alignItems:"center",children:[Object(r.jsx)(b.a,{size:"md",name:ue(e.uid).name}),Object(r.jsxs)(h.a,{flexDirection:"column",children:[Object(r.jsx)(p.a,{fontSize:".8rem",children:w()(e.created).format("YYYY-MM-DD HH:mm:ss")}),Object(r.jsx)(p.a,{fontSize:".8rem",children:ue(e.uid).name})]})]}),Object(r.jsx)(h.a,{marginLeft:"3rem",my:"0.5rem",children:Object(r.jsx)(p.a,{children:e.message})})]},e.id)}))}),Object(r.jsx)(h.a,{children:Object(r.jsxs)(x.a,{isInline:!0,width:"100%",children:[Object(r.jsx)(m.a,{placeholder:"",value:Q,onChange:function(e){return U(e.target.value)},onKeyPress:function(e){13===e.charCode&&le()}}),Object(r.jsx)(O.a,{onClick:le,children:"Send"})]})})]})]}),Object(r.jsxs)(g.a,{isOpen:ae,onClose:oe,closeOnEsc:!1,closeOnOverlayClick:!1,children:[Object(r.jsx)(g.e,{}),Object(r.jsxs)(g.c,{children:[Object(r.jsx)(g.d,{children:"Login"}),Object(r.jsx)(g.b,{children:Object(r.jsxs)(x.a,{width:"100%",children:[Object(r.jsx)(m.a,{placeholder:"username",value:Z,onChange:function(e){return $(e.target.value)}}),Object(r.jsx)(m.a,{placeholder:"password",type:"password",value:ne,onChange:function(e){return re(e.target.value)}}),Object(r.jsx)(O.a,{onClick:function(){function e(){return(e=Object(d.a)(f.a.mark((function e(){var t,n,r,c;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={username:Z,password:ne},n={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)},e.prev=2,e.next=5,y("http://127.0.0.1:8080/login",n);case 5:r=e.sent,c={name:Z,token:r.access_token},P(c),z(""),localStorage.setItem("session",JSON.stringify(c)),oe(),re(""),$(""),e.next=18;break;case 15:e.prev=15,e.t0=e.catch(2),z(e.t0.message);case 18:case"end":return e.stop()}}),e,null,[[2,15]])})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()},children:"Login"}),""!==I&&Object(r.jsxs)(p.a,{children:["Error: ",I]})]})})]})]})]})},k=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,107)).then((function(t){var n=t.getCLS,r=t.getFID,c=t.getFCP,a=t.getLCP,i=t.getTTFB;n(e),r(e),c(e),a(e),i(e)}))},C=n(16),E=n(102),J=n(106);o.a.render(Object(r.jsx)(a.a.StrictMode,{children:Object(r.jsxs)(C.a,{theme:E.a,children:[Object(r.jsx)(J.a,{}),Object(r.jsx)(S,{})]})}),document.getElementById("root")),k()}},[[95,1,2]]]);
//# sourceMappingURL=main.0e641544.chunk.js.map